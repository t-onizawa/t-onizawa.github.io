<!doctype html> 
<html>
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <title>Front on Rails | GmailApp風のメニューを作ってみた</title>
    <meta content="<p>GmailApp風のメニューをHTML, CSS, JavaScriptと...</p>" name="description" />
    <meta content="Frontend, フロントエンド, Rails, Ruby, Ruby on Rails, HTML, CSS3, JavaScript" name="keywords" />
    <meta content="width=device-width,user-scalable=no,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0" name="viewport" />
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><!--[if lt IE 9]><script src="../../../js/ie8.js" type="text/javascript"></script><![endif]--><link href="../../../css/all.css" media="screen" rel="stylesheet" type="text/css" /><link href="http://fonts.googleapis.com/css?family=Righteous" media="screen" rel="stylesheet" type="text/css" /><script type="text/javascript">
      (function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-59396331-1", location.hostname);ga("send","pageview");
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top org-navbar" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand org-logo" href="/">Front on Rails<span>FrontendとRailsのメモ</span></a>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-lg-9 col-md-9">
          <h1 class="org-page-head">
            GmailApp風のメニューを作ってみた
          </h1>
          <ul class="org-article-tags">
            <li class="label label-default">
              HTML
            </li>
            <li class="label label-default">
              CSS3
            </li>
            <li class="label label-default">
              JavaScript
            </li>
          </ul>
          <hr />
          <p>
            <span class="glyphicon glyphicon-time"></span> 投稿日2015/03/09
          </p>
          <hr /><p>GmailApp風のメニューをHTML, CSS, JavaScriptとで作成してみました。対応はiOS7以上・Android4以上です。</p>

<h1 id="デモとソース">デモとソース</h1>

<p><a title="Gmail" href="http://t-onizawa.github.io/demo/gmail">デモ</a>
<a title="Gmail" href="https://github.com/t-onizawa/Gmail-menu">ソース</a></p>

<h1 id="html">HTML</h1>

<pre><code class="html">&lt;body&gt;
&lt;div class=&quot;wrapper&quot;&gt;
    &lt;div class=&quot;side is-hide&quot; id=&quot;side&quot;&gt;
        &lt;div class=&quot;side-header&quot;&gt;
            &lt;h2&gt;side-header&lt;/h2&gt;
        &lt;/div&gt;
        &lt;nav class=&quot;side-inner&quot; id=&quot;side-inner&quot;&gt;
            &lt;ul&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu1&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu2&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Menu3&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
        &lt;/nav&gt;
    &lt;/div&gt;
    &lt;div class=&quot;container is-transition&quot; id=&quot;container&quot;&gt;
        &lt;header class=&quot;header slide&quot;&gt;
            &lt;h1&gt;HEADER&lt;/h1&gt;
            &lt;div class=&quot;btn-wrap&quot;&gt;&lt;a href=&quot;javascript:void(0);&quot; class=&quot;btn&quot; id=&quot;btn&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;
        &lt;/header&gt;
        &lt;main class=&quot;main slide&quot; id=&quot;main&quot;&gt;
            &lt;h1&gt;contents&lt;/h1&gt;
            &lt;ul&gt;
                &lt;li&gt;
                    &lt;a href=&quot;#&quot;&gt;
                        &lt;p&gt;名前&lt;/p&gt;
                        &lt;dl&gt;
                            &lt;dt&gt;題名&lt;/dt&gt;
                            &lt;dd&gt;本文テキスト&lt;/dd&gt;
                        &lt;/dl&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
                &lt;li&gt;
                    &lt;a href=&quot;#&quot;&gt;
                        &lt;p&gt;名前&lt;/p&gt;
                        &lt;dl&gt;
                            &lt;dt&gt;題名&lt;/dt&gt;
                            &lt;dd&gt;本文テキスト&lt;/dd&gt;
                        &lt;/dl&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
                &lt;li&gt;
                    &lt;a href=&quot;#&quot;&gt;
                        &lt;p&gt;名前&lt;/p&gt;
                        &lt;dl&gt;
                            &lt;dt&gt;題名&lt;/dt&gt;
                            &lt;dd&gt;本文テキスト&lt;/dd&gt;
                        &lt;/dl&gt;
                    &lt;/a&gt;
                &lt;/li&gt;
            &lt;/ul&gt;
        &lt;/main&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;body&gt;
</code></pre>

<p>続いて、<code>&lt;/body&gt;</code>の前にJavaScriptを読み込む。<br>
呼び出しはHTML内にしてみる。</p>

<pre><code class="html">&lt;script src=&quot;js/sidemenu.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
    SIDE_MENU.METHOD({
        mainId: &#39;container&#39;,
        slideCls: &#39;slide&#39;,
        menuId: &#39;side&#39;,
        btnId: &#39;btn&#39;
    });
    SIDE_MENU.INNER_SCROLL({
        scrollId: &#39;side-inner&#39;,
        fixHeaderHeight: 50
    });
&lt;/script&gt;
</code></pre>

<h1 id="scss">SCSS</h1>

<p>Gmail風なCSS</p>

<pre><code class="scss">// =========================
// GENERAL
// =========================
.is-hide {
  display: none;
}

// =========================
// CONTAINER
// =========================
.container {
  position: relative;
  background-color: #fff;
  min-height: 100%;
  box-shadow: 0 -1px 2px rgba(0, 0, 0, .26);
  .slide {
    -webkit-transform: translate(0, 0);
    -moz-transform: translate(0, 0);
    transform: translate(0, 0);
  }

  // setting Transition
  &amp;.is-transition {
    .slide {
      -webkit-transition: -webkit-transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
      -moz-transition: -moz-transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
      transition: transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
    }
  }
}

// HEADER
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 50px;
  line-height: 50px;
  background-color: #eee;
  box-shadow: 0 1px 2px rgba(0, 0, 0, .26);
  text-align: center;
  color: #666;
  z-index: 100;
  box-sizing: border-box;
}

// MAIN
.main {
  padding: 50px 0;
  position: absolute;
  z-index: 30;
  background-color: #fff;
  width: 100%;
  box-sizing: border-box;
  h1 {
    padding: 10px 20px;
  }
  li {
    border-top: 1px solid #ccc;
    line-height: 1.3;
  }
  a {
    display: block;
    padding: 8px 20px;
    color: #999;
    text-decoration: none;
  }
  p {
    font-size: 18px;
  }
  dd {
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
  }
}

// =========================
// TOGGLE BUTTON
// =========================
.btn-wrap {
  position: absolute;
  top: 5px;
  left: 5px;
}
.btn {
  width: 40px;
  height: 40px;
  display: block;
  position: relative;
  -webkit-transition: -webkit-transform 300ms ease;
  -moz-transition: -moz-transform 300ms ease;
  transition: transform 300ms ease;
  span,
  &amp;:before,
  &amp;:after {
    position: absolute;
    width: 20px;
    height: 2px;
    background-color: #666;
  }
  &amp;:before,
  &amp;:after{
    content: &quot;&quot;;
  }
  &amp;:before {
    top: 12px;
    left: 10px;
  }
  &amp;:after {
    bottom: 12px;
    left: 10px;
  }
  span {
    top: 19px;
    left: 10px;
  }
}

// =========================
// OPEN
// =========================
.is-open {

  // CONTAINER
  &amp;.container {
    .slide {
      -webkit-transform: translate(80%, 0);
      -moz-transform: translate(80%, 0);
      transform: translate(80%, 0);
    }
  }

  // TOGGLE BUTTON
  .btn {
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    transform: rotate(45deg);
    span {
      display: none;
    }
    &amp;:before,
    &amp;:after {
    }
    &amp;:before {
      top: 10px;
      left: 19px;
      width: 2px;
      height: 20px;
    }
    &amp;:after {
      top: 19px;
      left: 10px;
    }
  }
}

// =========================
// SIDE
// =========================
.side {
  color: #FFF;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  bottom: 0;
  z-index: 10;
  box-sizing: border-box;
  overflow: auto;
  background-color: #444;

}
.side-header {
  height: 50px;
  line-height: 50px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, .26);
  padding: 0 5px;
  position: relative;
  z-index: 30;
  background-color: #444;
}
.side-inner {
  position: absolute;
  width: 80%;
  z-index: 20;

  // setting Transition
  &amp;.is-transition {
    -webkit-transition: -webkit-transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
    -moz-transition: -moz-transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
    transition: transform 300ms cubic-bezier(0.1, 0.57, 0.1, 1);
  }
  li {
  }
  a {
    color: #fff;
    display: block;
    padding: 15px;
    font-size: 16px;
    text-decoration: none;
    font-weight: bold;
  }
}
</code></pre>

<h2 id="やってみたこと">やってみたこと</h2>

<ul>
<li>JavaScriptでボタンタップでクラスをつけてOPEN ⇔ CLOSE</li>
<li>OPENの時にメインコンテンツをtouchmoveするとメインコンテンツを動かす</li>
<li>touchendで位置を取得し、OPEN or CLOSE</li>
<li>OPENのときはメインコンテンツをスクロールさせない</li>
</ul>

<h3 id="問題点">問題点</h3>

<ul>
<li>メニューが長い時にスクロールさせなければいけない</li>
<li>メニューをtranslateで動かすが、ぎこちない</li>
<li>iOSではtranslateさせた中の要素に<code>position: fixed;</code>が効かない</li>
<li>iOS8では横向きで<code>position: fixed;</code>のヘッダーが崩れた</li>
</ul>

<h3 id="改善策">改善策</h3>

<ul>
<li>メニューのtouchmoveの時間に合わせてスムーズにスクロールさせた</li>
<li><code>position: fixed;</code>が効かない部分は親要素じゃなくそれぞれをtranslateさせた</li>
<li>iOS8の横向き<code>position: fixed;</code>は都度、対応しよう！</li>
</ul>

<h1 id="デモとソース">デモとソース</h1>

<p><a title="Gmail" href="http://t-onizawa.github.io/demo/gmail">デモ</a>
<a title="Gmail" href="https://github.com/t-onizawa/Gmail-menu">ソース</a></p>

        </div>
        <div class="col-lg-3 col-md-3 org-reset org-sidebar">
          <ul class="org-sns">
            <li>
              <a href="https://github.com/t-onizawa"><i class="fa fa-github-square fa-lg fa-inverse"></i></a>
            </li>
            <li>
              <a href="https://www.facebook.com/tetsuya.onizawa"><i class="fa fa-facebook-square fa-lg fa-inverse"></i></a>
            </li>
            <li>
              <a href="https://twitter.com/t_onizawa"><i class="fa fa-twitter-square fa-lg fa-inverse"></i></a>
            </li>
          </ul>
          <div class="org-well">
            <h4>
              Tags
            </h4>
            <ul class="list-unstyled">
              <li>
                <a href="/tags/html.html">HTML</a> (3)
              </li>
              <li>
                <a href="/tags/基本.html">基本</a> (10)
              </li>
              <li>
                <a href="/tags/タグ.html">タグ</a> (1)
              </li>
              <li>
                <a href="/tags/coder-s-high.html">coder's high</a> (3)
              </li>
              <li>
                <a href="/tags/vps.html">VPS</a> (9)
              </li>
              <li>
                <a href="/tags/ruby-on-rails.html">Ruby on Rails</a> (9)
              </li>
              <li>
                <a href="/tags/環境構築.html">環境構築</a> (11)
              </li>
              <li>
                <a href="/tags/centos.html">CentOS</a> (9)
              </li>
              <li>
                <a href="/tags/ssh.html">SSH</a> (1)
              </li>
              <li>
                <a href="/tags/mysql.html">MySQL</a> (1)
              </li>
              <li>
                <a href="/tags/ruby.html">Ruby</a> (5)
              </li>
              <li>
                <a href="/tags/apache.html">Apache</a> (4)
              </li>
              <li>
                <a href="/tags/passenger.html">Passenger</a> (1)
              </li>
              <li>
                <a href="/tags/ssl.html">ssl</a> (2)
              </li>
              <li>
                <a href="/tags/basic認証.html">basic認証</a> (1)
              </li>
              <li>
                <a href="/tags/mamp.html">MAMP</a> (1)
              </li>
              <li>
                <a href="/tags/vagrant.html">Vagrant</a> (1)
              </li>
              <li>
                <a href="/tags/css3.html">CSS3</a> (1)
              </li>
              <li>
                <a href="/tags/javascript.html">JavaScript</a> (1)
              </li>
              <li>
                <a href="/tags/htmlメール.html">HTMLメール</a> (1)
              </li>
            </ul>
          </div>
          <div class="org-well">
            <h4>
              Date
            </h4>
            <ol class="org-year">
              <li>
                <a href="/2015.html">2015年</a> (14)
                <ol class="org-month">
                  <li>
                    <a href="/2015/03.html">3月</a> (2)
                  </li>
                  <li>
                    <a href="/2015/02.html">2月</a> (3)
                  </li>
                  <li>
                    <a href="/2015/01.html">1月</a> (9)
                  </li>
                </ol>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <footer class="org-footer org-reset">
      <div class="container">
        <ul>
          <li>
            <a href="http://alifefilm.com">A LIFE FILM</a>
          </li>
        </ul>
        <p class="org-copyright">
          <small>Copyright © t-onizawa All Rights Reserved.</small>
        </p>
      </div>
    </footer><script src="../../../js/all.js" type="text/javascript"></script>
  </body>
</html>